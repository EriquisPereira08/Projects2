#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <locale.h>


char nome[150];
int idade;
char cPF[150];
char sexo[15];
int main();

struct amaz{
char perg[200];	
int pontos;	
	
};

struct amaz quest[] = {
	{.perg = "Tem febre ?\n", .pontos = 5},
	{.perg = "Tem dor de cabeça ?\n", .pontos = 1},
	{.perg = "Tem secreção nasal ou espirros ?\n", .pontos = 1},
	{.perg = "Tem dor/irritação na garganta ?\n", .pontos = 1},
	{.perg = "Tem tosse seca ?\n", .pontos = 3},
	{.perg = "Tem dificuldade respiratória ?\n", .pontos = 10},
	{.perg = "Tem dores no corpo ?\n", .pontos = 1},
	{.perg = "Tem diarréia ?\n", .pontos = 1},
	{.perg = "Esteve em contato, nos últimos 14 dias, com um caso diagnosticado com COVID-19 ?\n", .pontos = 10},
	{.perg = "Esteve em locais com grande aglomeração ?\n", .pontos = 3},
};







void pergunts(){

setlocale(LC_ALL,("Portuguese"));	
	
FILE*arqTxt;
arqTxt = fopen("dataBase.txt", "a");

if(arqTxt == NULL){
	
	printf("Erro ao criar o arquivo:\n");
}	
	
	
int i = 0;	
char resp;	
int soma = 0;
	
system("cls");
printf("===========================================================\n");
printf("Responda as perguntas a seguir com S(sim) ou N(não)\n");	
printf("===========================================================\n");	
	
for(i = 0; i < 10; i++){
printf("============================================================================================\n");	
printf("%s", quest[i].perg);	
printf("============================================================================================\n");
scanf("%c", &resp);	
fflush(stdin);
printf("--------------------------------------------------------------------------------------------\n");
fprintf(arqTxt, "%s\n %c\n", quest[i].perg, resp);

if(resp == 'S' || resp == 's'){
	
soma = soma + quest[i].pontos;	
	
}

}	
fprintf(arqTxt, "Pontuação total: %d\n", soma);
fclose(arqTxt);			
system("pause");
system("cls");	
	
if(soma >= 0 && soma <10){
printf("============================================================================================\n");	
printf("Você somou %d pontos, deve-se encaminha para o atendimento de baixo risco:\n", soma);	
printf("============================================================================================\n");	
}	
	
if(soma >= 10 && soma <20){
printf("============================================================================================\n");	
printf("Você somou %d pontos, deve-se encaminha para o atendimento de médio risco:\n", soma);	
printf("============================================================================================\n");	
}	

if(soma >= 20){
printf("============================================================================================\n");	
printf("Você somou %d pontos, deve-se encaminha para o atendimento de alto risco:\n", soma);	
printf("============================================================================================\n");	
}

soma = 0;

printf("============================================================================================\n");
printf("Pressione (Enter) para voltar ao menu inicial...\n");
printf("============================================================================================\n");
getchar();
system("cls");
main();	
}




void cadPaciente(){

system("cls");	
	
setlocale(LC_ALL,("Portuguese"));

FILE*arqTxt;
arqTxt = fopen("dataBase.txt", "a");

if(arqTxt == NULL){
	
	printf("Erro ao criar o arquivo:\n");
}




printf("==========================================\n");
printf("Informe o nome do paciente:\n");
printf("==========================================\n");
gets(nome);
printf("------------------------------------------\n");
fflush(stdin);
		
printf("==========================================\n");		
printf("Informe o CPF do paciente:\n");
printf("==========================================\n");
scanf("%s", cPF);
printf("------------------------------------------\n");
fflush(stdin);	
	
printf("==========================================\n");	
printf("Informe o Sexo do paciente: (M / F)\n");
printf("==========================================\n");
scanf("%s", sexo);
printf("------------------------------------------\n");
fflush(stdin);	

printf("==========================================\n");	
printf("Informe a idade do paciente:\n");
printf("==========================================\n");
scanf("%d", &idade);
fflush(stdin);	
	
fprintf(arqTxt, "Nome: %s\nCPF: %s\nSexo: %s\nIdade: %d\n",nome, cPF, sexo, idade);
fclose(arqTxt);
printf("==========================================\n");	
printf("Dados salvos com sucesso!\n");	
printf("==========================================\n");	
getchar();
	
pergunts();	
	
	
}



int main() {
	
setlocale(LC_ALL,("Portuguese"));
int oPC;	
	
printf("===============-------Menu-de-Cadastros-------=================\n");
printf("///////////////////////////////////////////////////////////////\n");
printf("2 - Cadastrar paciente\n");	
printf("///////////////////////////////////////////////////////////////\n");
printf("1 - Sair\n");	
printf("///////////////////////////////////////////////////////////////\n");
printf("Por favor, escolha uma opção:\n");
printf("///////////////////////////////////////////////////////////////\n");
scanf("%i", &oPC);
fflush(stdin);	

switch(oPC){
	
	case 1:
		system("cls");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("*********************************/////////////////////////////////////////////******************************************\n");
		printf("********************************//...FINALIZANDO O PROGRAMA, VOLTE SEMPRE...//******************************************\n");
		printf("********************************/////////////////////////////////////////////*******************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		printf("************************************************************************************************************************\n");
		break;
		
		case 2:
			cadPaciente();
			break;
			
			default:
				break;
	
	
}
	
	
	
	
	
	return 0;
}